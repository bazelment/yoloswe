load("@rules_go//go:def.bzl", "go_library", "go_test")

go_library(
    name = "planner",
    srcs = [
        "iteration.go",
        "mcp_tools.go",
        "mission_events.go",
        "planner.go",
        "prompts.go",
        "state.go",
        "stats.go",
        "streaming_integration.go",
    ],
    importpath = "github.com/bazelment/yoloswe/multiagent/planner",
    visibility = ["//visibility:public"],
    deps = [
        "//agent-cli-wrapper/claude",
        "//agent-cli-wrapper/protocol",
        "//multiagent/agent",
        "//multiagent/checkpoint",
        "//multiagent/progress",
        "//multiagent/protocol",
        "//multiagent/subagent",
        "//multiagent/subagents/builder",
        "//multiagent/subagents/designer",
        "//multiagent/subagents/reviewer",
    ],
)

go_test(
    name = "planner_test",
    srcs = [
        "mcp_tools_test.go",
        "planner_test.go",
        "streaming_integration_test.go",
    ],
    embed = [":planner"],
    deps = [
        "//agent-cli-wrapper/claude",
        "//agent-cli-wrapper/protocol",
        "//multiagent/agent",
        "//multiagent/protocol",
    ],
)
